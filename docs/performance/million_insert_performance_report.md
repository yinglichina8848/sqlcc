# SQLCC 100万次INSERT性能测试报告

## 概述

本报告详细记录了SQLCC存储引擎在执行100万次INSERT操作时的性能表现，包括单线程和多线程环境下的测试结果。

## 测试环境

- **操作系统**: Linux
- **测试时间**: 2023年
- **记录大小**: 128字节
- **总记录数**: 1,000,000条
- **理论数据大小**: 128,000,000字节 (约122.07MB)

## 测试结果

### 单线程测试

| 指标 | 值 |
|------|-----|
| 测试名称 | SingleThread_MillionInsert |
| 执行时间 | 179,074毫秒 (约2分59秒) |
| 操作总数 | 1,000,000次 |
| 吞吐量 | 5,584.28 ops/sec |
| 平均延迟 | 0.178431毫秒 |
| P95延迟 | 0.261毫秒 |
| P99延迟 | 0.335毫秒 |
| 线程数 | 1 |

### 多线程测试

| 线程数 | 执行时间(ms) | 吞吐量(ops/sec) | 平均延迟(ms) | P95延迟(ms) | P99延迟(ms) |
|--------|--------------|-----------------|--------------|-------------|-------------|
| 1 | 179,074 | 5,584.28 | 0.178431 | 0.261 | 0.335 |
| 2 | 86,955 | 11,500.2 | 0.17301 | 0.236 | 0.314 |
| 4 | 42,951 | 23,282.3 | 0.170996 | 0.215 | 0.296 |
| 8 | 21,577 | 46,345.6 | 0.171694 | 0.208 | 0.289 |

## 性能分析

### 吞吐量分析

- 单线程环境下，SQLCC能够实现约5,584 ops/sec的INSERT吞吐量
- 随着线程数增加，吞吐量呈近似线性增长：
  - 2线程: 11,500 ops/sec (约2.06倍提升)
  - 4线程: 23,282 ops/sec (约4.17倍提升)
  - 8线程: 46,346 ops/sec (约8.30倍提升)

### 延迟分析

- 所有线程配置下的平均延迟保持在0.17-0.18毫秒之间，表现稳定
- P95和P99延迟随着线程数增加略有降低，表明多线程环境下延迟分布更加集中
- 8线程配置下P99延迟仅为0.289毫秒，表现出色

### 扩展性分析

- SQLCC在INSERT操作上表现出优秀的并行扩展能力
- 从1线程到8线程，吞吐量提升了约8.3倍，接近理想线性扩展
- 延迟保持在稳定水平，没有随着并发度增加而显著上升

## 结论

SQLCC存储引擎在INSERT操作上表现出色：

1. **高吞吐量**: 8线程环境下可实现超过46,000 ops/sec的INSERT吞吐量
2. **低延迟**: 平均延迟稳定在0.17毫秒左右，P99延迟低于0.3毫秒
3. **优秀扩展性**: 多线程扩展接近理想线性，充分利用多核CPU资源
4. **稳定性**: 各项性能指标在不同并发度下保持稳定

这些结果表明SQLCC的存储引擎设计和实现达到了高性能数据库系统的要求，特别是在高并发INSERT场景下表现优异。