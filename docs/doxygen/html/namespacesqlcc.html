<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SQLCC Database Management System: sqlcc 命名空间参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SQLCC Database Management System<span id="projectnumber">&#160;0.6.0</span>
   </div>
   <div id="projectbrief">一个用于教学的数据库管理系统，帮助学生理解数据库原理和实现</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">命名空间</a> &#124;
<a href="#func-members">函数</a>  </div>
  <div class="headertitle"><div class="title">sqlcc 命名空间参考</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
命名空间</h2></td></tr>
<tr class="memitem:namespacesqlcc_1_1network" id="r_namespacesqlcc_1_1network"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesqlcc_1_1network.html">network</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespacesqlcc_1_1sql__parser" id="r_namespacesqlcc_1_1sql__parser"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesqlcc_1_1sql__parser.html">sql_parser</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:a44d3d369c14bdc6088fac0d9214e85ae" id="r_a44d3d369c14bdc6088fac0d9214e85ae"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesqlcc.html#a44d3d369c14bdc6088fac0d9214e85ae">toLower</a> (const std::string &amp;str)</td></tr>
<tr class="separator:a44d3d369c14bdc6088fac0d9214e85ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6314fe8039183b743aa4844166a84814" id="r_a6314fe8039183b743aa4844166a84814"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesqlcc.html#a6314fe8039183b743aa4844166a84814">TrimString</a> (std::string &amp;str)</td></tr>
<tr class="separator:a6314fe8039183b743aa4844166a84814"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><hr  />
 <h1><a class="anchor" id="autotoc_md1"></a>
商业数据库核心索引技术：B+树设计思想深度剖析</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
WHY (为什么选择B+树作为索引核心):</h2>
<p>商用数据库的核心挑战：</p><ol type="1">
<li>海量数据存储(EB级别)和高效查询需求</li>
<li>磁盘I/O最小化和随机访问优化</li>
<li>并发访问控制和事务一致性</li>
<li>可预测的查询性能和系统稳定性</li>
<li>索引维护成本与查询性能的平衡</li>
</ol>
<p>B+树的设计巧妙解决了这些商业数据库的核心问题：</p><ul>
<li>平衡多叉树：充分利用磁盘页大小，减少I/O次数</li>
<li>数据仅存叶子：内部节点作为路标，减少索引大小</li>
<li>叶子节点链：支持高效的范围查询和顺序扫描</li>
<li>平衡操作：保持树的平衡，查询性能可预测</li>
</ul>
<h2><a class="anchor" id="autotoc_md3"></a>
WHAT (B+树如何工作):</h2>
<p>核心设计理念：</p><ol type="1">
<li>多层索引结构：根 → 内部节点 → 叶子节点</li>
<li>磁盘页映射：每棵子树对应一个磁盘页</li>
<li>自平衡操作：通过分裂和合并维持平衡</li>
<li>范围查询支持：叶子节点通过指针相连</li>
</ol>
<p>商业场景应用：</p><ul>
<li>WHERE条件查询：O(logN)定位 + O(K)获取</li>
<li>范围查询：叶子链顺序扫描，极高效率</li>
<li>索引维护：增删改后自平衡调整</li>
<li>并发控制：细粒度锁管理 + MVCC支持</li>
</ul>
<h2><a class="anchor" id="autotoc_md4"></a>
HOW (B+树在商业数据库中的实现要点):</h2>
<ol type="1">
<li>节点结构设计：<ul>
<li>内部节点：只存储关键值+子指针，占用空间小</li>
<li>叶子节点：存储完整数据+前后指针，支持范围查询</li>
<li>填充因子：预留空间给频繁的插入操作</li>
</ul>
</li>
<li>分裂策略：<ul>
<li>溢出时中点分裂，确保左子树 ≤ 中点 ≤ 右子树</li>
<li>批量分裂：减少递归分裂的性能开销</li>
<li>并发分裂：细粒度锁控制，无阻塞设计</li>
</ul>
</li>
<li>性能优化：<ul>
<li>预取策略：预测性加载后续页面到缓冲池</li>
<li>合并优化：延迟合并减少I/O开销</li>
<li>缓存友好：节点大小适配CPU缓存行</li>
</ul>
</li>
<li>并发控制：<ul>
<li>乐观并发：版本戳控制冲突检测</li>
<li>协同锁协议：允许读并发，写互斥</li>
<li>锁升级策略：细粒度→粗粒度，按需升级</li>
</ul>
</li>
<li>商业数据库的特殊考虑：<ul>
<li>WAL(预写日志)：确保崩溃恢复的一致性</li>
<li>索引重构：在线重建索引保证业务连续</li>
<li>统计信息：动态更新索引选择性信息</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md5"></a>
WHY B+树主导商用数据库的核心性能指标：</h2>
<ol type="1">
<li>I/O效率：<ul>
<li>B+树的阶数可达几百，树高度很低</li>
<li>单次查询I/O次数通常为3-4次(根+内部+叶子)</li>
<li>相比B树减少了30%-50的I/O开销</li>
</ul>
</li>
<li>缓存效率：<ul>
<li>内部节点缓存热点，减少重复加载</li>
<li>叶子节点预取策略，预测性缓存</li>
<li>局部性原理得到充分应用</li>
</ul>
</li>
<li>并发效率：<ul>
<li>多版本B+树支持无阻塞快照读</li>
<li>分层锁协议允许多并发访问</li>
<li>乐观锁减少锁竞争开销</li>
</ul>
</li>
<li>维护效率：<ul>
<li>自平衡操作保证查询性能稳定</li>
<li>批量操作减少维护时的性能抖动</li>
<li>在线重建支持24x7业务连续性</li>
</ul>
</li>
<li>扩展性：<ul>
<li>支持索引分区和分布式部署</li>
<li>动态调整适应数据量变化</li>
<li>兼容多租户和大数据分析场景</li>
</ul>
</li>
</ol>
<hr  />
 <h1><a class="anchor" id="autotoc_md7"></a>
这个B+树实现的商业价值和学习意义</h1>
<p>对于学生和开发者而言，理解B+树不仅仅是数据结构的知识，更重要的是：</p>
<ol type="1">
<li>数据库系统设计思维：<ul>
<li>磁盘I/O是最昂贵的操作，一切设计围绕I/O优化</li>
<li>树结构设计权衡读写操作的复杂度</li>
<li>并发控制策略影响整个系统的伸缩性</li>
</ul>
</li>
<li>商业数据库的核心性能要求：<ul>
<li>查询延迟：毫秒级响应是基本要求</li>
<li>吞吐量：每秒万级QPS是最低目标</li>
<li>稳定性：99.99可用性和可预测性能</li>
<li>扩展性：无缝扩容到PB级别数据</li>
</ul>
</li>
<li>系统设计的最佳实践：<ul>
<li>抽象与封装：接口设计决定系统扩展性</li>
<li>模块化设计：各组件职责清晰，独立演进 </li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md8"></a>
- 性能监控：埋点和调优是持续性工作</h1>
</div><h2 class="groupheader">函数说明</h2>
<a id="a44d3d369c14bdc6088fac0d9214e85ae" name="a44d3d369c14bdc6088fac0d9214e85ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44d3d369c14bdc6088fac0d9214e85ae">&#9670;&#160;</a></span>toLower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string sqlcc::toLower </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6314fe8039183b743aa4844166a84814" name="a6314fe8039183b743aa4844166a84814"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6314fe8039183b743aa4844166a84814">&#9670;&#160;</a></span>TrimString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sqlcc::TrimString </td>
          <td>(</td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
