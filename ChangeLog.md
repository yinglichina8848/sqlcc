# 变更日志 (Change Log)

所有重要的项目变更都会记录在这个文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)，
并且该项目遵循 [语义化版本控制](https://semver.org/lang/zh-CN/)。

---

## [未发布] (Unreleased)

### 计划中的功能
- B+树索引结构
- SQL解析器基础框架
- 事务管理系统
- 并发控制机制

---

## [0.2.1] - 2025-11-05 15:30:00

### 新增 (Added)
- **文档分支管理**：创建了专门的docs分支用于管理Doxygen生成的API文档
- **分支管理文档**：创建了docs/BRANCHES.md，详细说明主分支和文档分支的用途和使用方法
- **文档生成脚本**：创建了scripts/generate_docs.sh，简化文档生成流程
- **Makefile支持**：添加了Makefile，提供便捷的构建、测试和文档生成命令
- **文档中心**：创建了docs/index.md，作为所有文档的导航入口
- **AI交互记录**：创建了TRAE-Chat.md，记录完整的AI辅助开发过程

#### 详细变更
- 创建了docs分支，将Doxygen生成的API文档与主分支分离
- 更新了.gitignore文件，添加/docs/doxygen/规则，确保API文档不会提交到主分支
- 在README.md中添加了分支说明和API文档查看指南
- 创建了完整的文档管理体系，包括生成、组织和导航
- 实现了分支间同步机制，确保代码和文档的一致性

#### 技术实现
- 使用Git分支管理代码和文档的分离
- 使用Makefile简化常用操作
- 使用脚本自动化文档生成流程
- 使用Markdown文档提供清晰的使用指南

#### 分支结构
- **主分支 (master)**：包含源代码、测试和基础文档
- **文档分支 (docs)**：包含主分支所有内容以及完整的Doxygen API文档

### 变更 (Changed)
- 更新了README.md，添加了分支说明和API文档查看指南
- 优化了文档组织结构，提供更清晰的导航
- 改进了项目构建和文档生成流程

---

## [0.2.0] - 2025-11-05 15:07:00

### 新增 (Added)
- **存储引擎核心功能**：实现了完整的页式存储引擎系统
- **磁盘管理器 (DiskManager)**：负责磁盘I/O操作和页面空间管理
- **缓冲池 (BufferPool)**：实现页面缓存和LRU替换策略
- **页面对象 (Page)**：表示内存中的8KB数据页
- **存储引擎 (StorageEngine)**：整合所有组件，提供统一接口
- **日志系统**：使用spdlog实现分级日志记录
- **单元测试框架**：使用Google Test框架实现全面的单元测试
- **Doxygen文档**：添加了完整的API文档注释

#### 详细变更
- 实现了`DiskManager`类，支持页面分配、释放和读写操作
- 实现了`BufferPool`类，支持LRU替换策略和页面引用计数
- 实现了`Page`类，提供数据读写接口和元数据管理
- 实现了`StorageEngine`类，整合所有组件提供统一接口
- 添加了完整的单元测试，覆盖所有核心功能
- 为所有源码添加了Doxygen风格注释
- 创建了存储引擎设计文档和单元测试文档

#### 测试结果
- ✅ 所有7个单元测试通过
- ✅ 存储引擎初始化测试通过
- ✅ 新页面创建测试通过
- ✅ 页面获取测试通过
- ✅ 页面刷新测试通过
- ✅ 全量页面刷新测试通过
- ✅ 大量页面操作测试通过
- ✅ 页面删除测试通过

#### 性能指标
- 页面大小：8KB
- 缓冲池大小：可配置，默认64页
- LRU替换算法：O(1)时间复杂度
- 单元测试执行时间：< 1秒

#### 技术栈确认
- **开发语言**：C++20
- **构建工具**：CMake 3.22+
- **测试框架**：Google Test
- **日志库**：spdlog
- **文档生成**：Doxygen
- **编译器**：GCC 13.3.0
- **开发环境**：WSL + Ubuntu 24.04

### 变更 (Changed)
- 更新了项目文档，添加了存储引擎设计文档
- 完善了单元测试框架，提高了代码覆盖率
- 优化了页面删除逻辑，确保删除后FetchPage返回nullptr

### 修复 (Fixed)
- 修复了BufferPool::FetchPage方法在页面不存在时仍创建新页面的问题
- 修复了storage_engine_test.cc中的类型转换错误
- 修复了DeletePage测试失败的问题

---

## [0.1.1] - 2025-10-29

### 新增 (Added)
- **版本标签**：创建了v0.1.1标签，标记项目初始框架完成
- **文档完善**：项目文档体系建立完成

### 变更 (Changed)
- **版本号更新**：从0.1.0更新到0.1.1，表示初始框架稳定版本
- **项目状态**：从开发阶段进入可编译执行阶段

### 说明
这个版本标志着项目初始框架的完成，具备以下特征：
- ✅ 项目结构完整
- ✅ 构建系统配置完成
- ✅ 可以成功编译
- ✅ 程序可以正常执行
- ✅ 版本管理规范

---

## [0.1.0] - 2025-10-29

### 新增 (Added)
- **项目初始化**：创建了完整的C++数据库项目结构
- **构建系统**：配置了CMake构建系统，支持C++20标准
- **版本管理**：实现了语义化版本控制（Semantic Versioning）
- **基础程序框架**：创建了可执行的数据库启动程序
- **文档体系**：建立了完整的项目文档结构

#### 详细变更
- 创建了标准的项目目录结构：`src/`, `include/`, `docs/`, `tests/`, `scripts/`
- 配置了`.gitignore`文件，排除构建产物和IDE配置文件
- 实现了主程序框架，支持版本信息显示
- 创建了版本头文件`include/version.h`，定义版本号宏
- 配置了CMakeLists.txt，支持多种编译方式
- 添加了完整的编译警告选项（-Wall -Wextra -Wpedantic -Wshadow -Wconversion）

#### 编译和运行验证
- ✅ CMake配置成功，无错误提示
- ✅ 编译过程无警告和错误
- ✅ 可执行文件生成成功（build/sqlcc）
- ✅ 程序运行输出正确版本信息："SqlCC 0.1.0 startup!"
- ✅ 程序正常退出（返回码0）

#### 性能指标
- 编译时间：< 1秒
- 可执行文件大小：约 20KB
- 内存使用：正常范围
- 启动速度：瞬时响应

#### 技术栈确认
- **开发语言**：C++20
- **构建工具**：CMake 3.22+
- **编译器**：GCC 13.3.0
- **开发环境**：WSL + Ubuntu 24.04
- **版本控制**：Git + Gitee

### 变更 (Changed)
- 更新了Guide.md文档，添加了详细的编译和执行说明
- 完善了项目初始化流程，提供了多种编译方法

### 修复 (Fixed)
- 修复了CMakeLists.txt文件路径配置问题
- 解决了构建系统配置错误

---

## [0.0.1] - 2025-10-29

### 新增 (Added)
- **仓库初始化**：在Gitee上创建了项目仓库
- **基础文档**：创建了README.md和项目说明文档
- **许可证**：添加了项目许可证文件

### 标签说明
- 这是一个里程碑标签，标记项目正式开始
- 主要用于版本控制历史记录

---

## 版本历史概览

| 版本 | 发布日期 | 主要功能 | 状态 |
|------|----------|----------|------|
| 0.1.0 | 2025-10-29 | 项目初始化，基础框架 | ✅ 完成 |
| 0.2.0 | 2025-11-05 15:07:00 | 存储引擎核心功能 | ✅ 完成 |
| 0.2.1 | 2025-11-05 15:30:00 | 文档分支管理系统 | ✅ 完成 |
| 0.3.0 | 计划中 | SQL解析器实现 | 📋 计划中 |
| 0.4.0 | 计划中 | B+树索引系统 | 📋 计划中 |
| 0.5.0 | 计划中 | 事务管理功能 | 📋 计划中 |
| 1.0.0 | 目标 | 完整数据库系统 | 🎯 最终目标 |

---

## 贡献指南

### 提交信息规范
遵循[约定式提交](https://www.conventionalcommits.org/zh-hans/v1.0.0/)规范：

```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

类型说明：
- `feat`: 新功能
- `fix`: 修复问题
- `docs`: 文档更新
- `style`: 代码格式调整
- `refactor`: 代码重构
- `test`: 测试相关
- `chore`: 构建过程或辅助工具的变动

### 版本发布流程
1. 更新`include/version.h`中的版本号
2. 更新`ChangeLog.md`文件
3. 创建Git标签：`git tag -a v0.x.x -m "版本说明"`
4. 推送标签：`git push origin v0.x.x`

---

**最后更新：2025年10月29日 | 维护者：yinglichina, 李莹**  
yinglichina@gmail.com, 1820393151@qq.com